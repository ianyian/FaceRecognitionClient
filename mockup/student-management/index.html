<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Management - iOS Draft</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Main Container -->
        <div class="container">
            <!-- Header with navigation -->
            <header class="header">
                <button class="back-btn" id="backBtn" style="display: none;">
                    ‚Üê Back
                </button>
                <h1 id="pageTitle">Students</h1>
                <button class="add-btn" id="addStudentBtn">
                    + Add
                </button>
            </header>

            <!-- Student List View -->
            <div id="studentListView" class="view active">
                <!-- Search Bar -->
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="Search by name..." class="search-input">
                </div>
                
                <!-- Filter Tabs -->
                <div class="filter-tabs">
                    <button class="filter-tab active" data-status="Registered">Registered</button>
                    <button class="filter-tab" data-status="Deleted">Deleted</button>
                </div>

                <!-- Student List -->
                <div id="studentList" class="student-list">
                    <!-- Students will be rendered here -->
                    <div class="loading">Loading students...</div>
                </div>
            </div>

            <!-- Student Form View (Add/Edit) -->
            <div id="studentFormView" class="view">
                <form id="studentForm" class="student-form">
                    <!-- Student Information Section -->
                    <section class="form-section">
                        <h2 class="section-title">Student Information</h2>
                        <p class="section-desc">Enter the student's personal details.</p>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="studentFirstName">First Name *</label>
                                <input type="text" id="studentFirstName" required minlength="2" placeholder="e.g., Jane">
                                <span class="error-message" id="firstNameError"></span>
                            </div>
                            <div class="form-group">
                                <label for="studentLastName">Last Name *</label>
                                <input type="text" id="studentLastName" required minlength="2" placeholder="e.g., Doe">
                                <span class="error-message" id="lastNameError"></span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="className">Class *</label>
                            <select id="className" required>
                                <option value="">Select a class</option>
                                <!-- Classes will be populated dynamically -->
                            </select>
                            <span class="error-message" id="classNameError"></span>
                        </div>
                    </section>

                    <!-- Parent Information Section -->
                    <section class="form-section">
                        <h2 class="section-title">Parent/Guardian Information</h2>
                        <p class="section-desc">For sending attendance notifications.</p>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="parentFirstName">Parent's First Name *</label>
                                <input type="text" id="parentFirstName" required minlength="2" placeholder="e.g., John">
                                <span class="error-message" id="parentFirstNameError"></span>
                            </div>
                            <div class="form-group">
                                <label for="parentLastName">Parent's Last Name *</label>
                                <input type="text" id="parentLastName" required minlength="2" placeholder="e.g., Doe">
                                <span class="error-message" id="parentLastNameError"></span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="parentPhone">Parent's WhatsApp Number *</label>
                            <input type="tel" id="parentPhone" required minlength="10" placeholder="+1-555-123-4567">
                            <span class="error-message" id="parentPhoneError"></span>
                        </div>
                    </section>

                    <!-- Face Samples Section -->
                    <section class="form-section">
                        <h2 class="section-title">Face Samples</h2>
                        <p class="section-desc" id="faceSamplesDesc">Capture 3-5 clear face photos.</p>
                        
                        <!-- Camera Preview -->
                        <div class="camera-container">
                            <video id="cameraPreview" autoplay playsinline muted></video>
                            <canvas id="captureCanvas" style="display: none;"></canvas>
                            <div id="cameraOverlay" class="camera-overlay">
                                <p>Camera is off</p>
                                <button type="button" id="startCameraBtn" class="btn btn-secondary">Turn Camera On</button>
                            </div>
                        </div>
                        
                        <button type="button" id="captureBtn" class="btn btn-capture" disabled>
                            üì∑ Capture Face (<span id="captureCount">0</span>/5)
                        </button>
                        
                        <!-- Face Samples Grid -->
                        <div class="samples-container">
                            <!-- Existing Samples (Edit Mode) -->
                            <div id="existingSamples" class="samples-grid" style="display: none;">
                                <h4>Current Samples</h4>
                                <div id="existingSamplesGrid" class="face-grid"></div>
                            </div>
                            
                            <!-- New Samples -->
                            <div id="newSamples" class="samples-grid">
                                <h4 id="newSamplesTitle">New Samples</h4>
                                <div id="newSamplesGrid" class="face-grid"></div>
                            </div>
                        </div>
                    </section>

                    <!-- Submit Button -->
                    <div class="form-actions">
                        <button type="submit" id="submitBtn" class="btn btn-primary btn-large">
                            <span id="submitBtnText">Register Student</span>
                            <div id="submitSpinner" class="spinner" style="display: none;"></div>
                        </button>
                    </div>
                </form>
            </div>

            <!-- Student Detail View -->
            <div id="studentDetailView" class="view">
                <div class="detail-container">
                    <!-- Student Info Card -->
                    <div class="detail-card">
                        <h2 class="section-title">Student Information</h2>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <span class="detail-label">First Name</span>
                                <span class="detail-value" id="detailFirstName">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Last Name</span>
                                <span class="detail-value" id="detailLastName">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Class</span>
                                <span class="detail-value" id="detailClassName">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Registration Date</span>
                                <span class="detail-value" id="detailRegDate">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Status</span>
                                <span class="detail-value" id="detailStatus">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Face Samples Card -->
                    <div class="detail-card">
                        <h2 class="section-title">Face Samples</h2>
                        <div id="detailFaceSamples" class="face-grid">
                            <p class="no-samples">No face samples available.</p>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="detail-actions">
                        <button id="editStudentBtn" class="btn btn-secondary">‚úèÔ∏è Edit Student</button>
                        <button id="deleteStudentBtn" class="btn btn-danger">üóëÔ∏è Delete Student</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Toast Notifications -->
        <div id="toastContainer" class="toast-container"></div>

        <!-- Delete Confirmation Modal -->
        <div id="deleteModal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>Are you absolutely sure?</h3>
                <p id="deleteModalText">This will mark the student as deleted. This action can be undone by an administrator.</p>
                <div class="modal-actions">
                    <button id="cancelDeleteBtn" class="btn btn-secondary">Cancel</button>
                    <button id="confirmDeleteBtn" class="btn btn-danger">Delete</button>
                </div>
            </div>
        </div>

        <!-- Image Preview Modal -->
        <div id="imageModal" class="modal" style="display: none;">
            <div class="modal-content image-modal">
                <img id="previewImage" src="" alt="Face sample preview">
                <button id="closeImageModal" class="btn btn-secondary">Close</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
